######################
## BabyJubJub Curve ##
######################

a = cint(168700)
d = cint(168696)

# Test on Curve
def on_curve(x,y):
    a*x^2 + y^2 == 1 + d*x^2*y^2

x = cint(995203441582195749578291179787384436505546430278305826713579947235728471134)
y = cint(5472060717959818805561601436314318772137091100104008585924551046643952123905)
g = (x,y)

# Test on Curve
# lhs = a*x**2 + y**2
# rhs = 1 + d*x**2*y**2
# print_ln('lhs: %s', lhs)
# print_ln('rhs: %s', rhs)

def add(x1,y1,x2,y2):
    x3 = (x1*y2 + y1*x2).field_div(1 + d*x1*x2*y1*y2)
    y3 = (y1*y2 - a*x1*x2).field_div(1 - d*x1*x2*y1*y2)
    return (x3,y3)

x1 = cint(17777552123799933955779906779655732241715742912184938656739573121738514868268)
y1 = cint(2626589144620713026669568689430873010625803728049924121243784502389097019475)

x2 = cint(16540640123574156134436876038791482806971768689494387082833631921987005038935)
y2 = cint(20819045374670962167435360035096875258406992893633759881276124905556507972311)

x3 = cint(7916061937171219682591368294088513039687205273691143098332585753343424131937)
y3 = cint(14035240266687799601661095864649209771790948434046947201833777492504781204499)

print_ln('res : %s', add(x1,y1,x2,y2))
print_ln('comp: %s', (x3,y3))

x1 = cint(17777552123799933955779906779655732241715742912184938656739573121738514868268)
y1 = cint(2626589144620713026669568689430873010625803728049924121243784502389097019475)

x2 = cint(6890855772600357754907169075114257697580319025794532037257385534741338397365)
y2 = cint(4338620300185947561074059802482547481416142213883829469920100239455078257889)

print_ln('res : %s', add(x1,y1,x1,y1))
print_ln('comp: %s', (x2,y2))

id0 = cint(0)
id1 = cint(1)
print_ln('id : %s', add(id0,id1,id0,id1))